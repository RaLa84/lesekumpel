<!DOCTYPE html>
<html lang="de" data-syllmode="off">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Deine Geschichte</title>
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&family=Comic+Sans+MS&display=swap" rel="stylesheet">
  
  <style>
    /* 1. BASIS */
    :root { --bg:#f0f8ff; --fg:#16202a; --brand:#ff6b6b; --border:#ffcc00; --focus:#ffd54a; --card:#ffffff; --correct:#4CAF50; --wrong:#ff5252; }
    body { margin:0; padding:0; background:var(--bg); color:var(--fg); font-family: 'Atkinson Hyperlegible', 'Comic Sans MS', sans-serif; display: flex; flex-direction: column; align-items: center; }

    /* 2. HEADER */
    header { position: sticky; top: 0; width: 100%; background: var(--card); border-bottom: 3px solid var(--border); z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    .nav-wrap { max-width: 900px; margin: 0 auto; padding: 10px 20px; display: flex; align-items: center; justify-content: space-between; }
    .brand { display: flex; align-items: center; gap: 10px; text-decoration: none; color: var(--brand); font-weight: 700; font-size: 1.5em; font-family: 'Comic Sans MS', sans-serif; }
    .brand img { height: 45px; width: auto; border-radius: 8px; }
    .nav-links { display: flex; gap: 15px; align-items: center; }
    .nav-btn { text-decoration: none; color: #555; font-weight: bold; padding: 8px 15px; border-radius: 20px; transition: all 0.2s; border: 2px solid transparent; }
    .nav-btn:hover { background: #fff5e6; color: var(--brand); }
    .nav-btn.cta { border-color: var(--border); background: #fff; }
    .nav-btn.cta:hover { background: var(--brand); color: #fff; border-color: var(--brand); }
    .burger { display: none; background: none; border: 2px solid var(--border); border-radius: 8px; cursor: pointer; padding: 5px; color: var(--brand); }
    .burger svg { width: 28px; height: 28px; display: block; }
    .mobile-menu { display: none; position: absolute; top: 100%; left: 0; width: 100%; background: var(--card); border-bottom: 3px solid var(--border); flex-direction: column; padding: 10px 0; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .mobile-menu a { display: block; padding: 15px 20px; text-decoration: none; color: #555; font-weight: bold; border-bottom: 1px solid #eee; }
    .mobile-menu.open { display: flex; }
    @media (max-width: 700px) { .nav-links { display: none; } .burger { display: block; } }

    /* 3. CONTAINER & TOOLS */
    .container { max-width: 800px; width: 90%; background:var(--card); padding: 40px; border-radius: 20px; border: 5px solid var(--border); box-shadow: 0 10px 25px rgba(0,0,0,0.05); position: relative; margin-top: 30px; margin-bottom: 40px; }
    .tools { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; background: #fff9e6; padding: 15px; border-radius: 15px; margin-bottom: 30px; border: 2px dashed var(--border); }
    button { background: white; border: 2px solid var(--border); border-radius: 10px; padding: 10px 15px; cursor: pointer; font-weight: 700; color: #555; font-family: inherit; transition: all 0.1s; }
    button:hover { transform: translateY(-2px); border-color: var(--brand); color: var(--brand); }
    button[aria-pressed="true"] { background: var(--brand); color: white; border-color: var(--brand); }

    /* 4. CONTENT STYLES */
    h1 { color: var(--brand); text-align: center; font-size: 2.5em; text-transform: uppercase; margin-bottom: 20px; }
    #story-content { font-size: 1.4em; line-height: 1.8; color: #444; transition: font-size 0.2s; }
    p { margin-bottom: 1.5rem; }
    
    /* Silben */
    .word { position:relative; display: inline-block; margin-right: 0.25em; cursor: default; }
    .syll { padding-bottom:.05em; border-bottom:1px dotted transparent; transition: color 0.2s; }
    [data-syllmode="color"] .word .syll:nth-child(odd){ color: #007bff; }
    [data-syllmode="color"] .word .syll:nth-child(even){ color: #d32f2f; }
    
    /* Bild */
    .story-image { display: block; margin: 0 auto 30px auto; width: 100%; max-width: 400px; border-radius: 15px; object-fit: contain; }

    /* 5. AUTOREN PROFIL */
    .author-profile {
      display: flex; align-items: center; gap: 20px;
      background: #fff; border: 2px solid #eee; border-left: 5px solid var(--brand);
      border-radius: 15px; padding: 20px; margin-top: 50px; margin-bottom: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.03);
    }
    .author-img {
      width: 80px; height: 80px; border-radius: 50%; object-fit: cover;
      border: 3px solid var(--border); flex-shrink: 0;
    }
    .author-info h4 { margin: 0 0 5px 0; color: var(--brand); font-size: 1.3em; font-family: 'Comic Sans MS', sans-serif; }
    .author-info p { margin: 0; color: #666; font-size: 1em; line-height: 1.4; font-weight: normal; }
    @media (max-width: 500px) {
      .author-profile { flex-direction: column; text-align: center; }
      .author-profile h4 { margin-top: 10px; }
    }

    /* 6. QUIZ STYLES */
    .quiz-section { margin-top: 30px; padding-top: 30px; border-top: 2px dashed #eee; }
    .quiz-section h2 { text-align: center; color: var(--brand); margin-bottom: 30px; }
    .quiz-card { background: #fdfdfd; border: 2px solid #eee; border-radius: 15px; padding: 20px; margin-bottom: 20px; }
    .quiz-card h3 { margin-top: 0; color: #555; }
    .answers-grid { display: grid; gap: 10px; margin-top: 15px; }
    .quiz-btn { width: 100%; text-align: left; padding: 15px; border: 2px solid var(--border); background: white; border-radius: 10px; font-size: 1em; cursor: pointer; transition: all 0.2s; }
    .quiz-btn:hover { background: #fff9e6; }
    .quiz-btn.correct { background-color: var(--correct) !important; color: white; border-color: var(--correct); }
    .quiz-btn.wrong { background-color: var(--wrong) !important; color: white; border-color: var(--wrong); animation: shake 0.4s; }
    @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); } }

    /* 7. INTERACTION & FOOTER */
    .interaction-area { margin-top: 50px; padding-top: 30px; border-top: 2px dashed #eee; }
    .microsurvey { text-align: center; margin-bottom: 40px; }
    .thumbs-btn { font-size: 1.8em; margin: 0 10px; padding: 10px 20px; background: #f9f9f9; border-color: #eee; }
    .comment-box { background: #fdfdfd; border: 2px solid #eee; border-radius: 15px; padding: 20px; }
    .fake-textarea { width: 100%; height: 80px; padding: 10px; border: 2px solid var(--border); border-radius: 10px; resize: none; margin-bottom: 10px; }
    .send-btn { background: var(--brand); color: white; border: none; float: right; }
    
    .footer { margin-top: 60px; padding-top: 30px; border-top: 3px dashed var(--border); text-align: center; color: #888; clear: both; }
    .footer a { color: #888; text-decoration: none; font-weight: bold; margin: 0 10px; transition: color 0.2s; }
    .footer a:hover { color: var(--brand); }
    .separator { color: var(--border); font-weight: bold; }

    /* Lupe */
    .lens { position: fixed; z-index: 9999; pointer-events: none; padding: .25rem .75rem; background: white; border: 3px solid var(--brand); border-radius: .8rem; box-shadow: 0 8px 18px rgba(0,0,0,.15); font-weight: 700; font-size: 1.8rem; color: #333; transform: translate(-50%, -130%); display: none; white-space: nowrap; }
    .lens[data-show="true"] { display: block; }
  </style>
</head>
<body>

  <header>
    <div class="nav-wrap">
      <a href="https://rala84.github.io/lesekumpel/" class="brand">
        <img src="https://rala84.github.io/lesekumpel/logo1.png" alt="Logo">
        <span>Lesekumpel</span>
      </a>
      <div class="nav-links">
        <a href="../index.html" class="nav-btn">üìö Bibliothek</a>
        <a href="https://rala84.app.n8n.cloud/form/30d75a75-54fd-42fd-bea6-ab24799ca565" class="nav-btn cta">‚ú® Neue Geschichte</a>
      </div>
      <button class="burger" id="burgerBtn"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
    </div>
    <div class="mobile-menu" id="mobileMenu">
      <a href="../index.html">üìö Zur Bibliothek</a>
      <a href="https://rala84.app.n8n.cloud/form/30d75a75-54fd-42fd-bea6-ab24799ca565">‚ú® Neue Geschichte schreiben</a>
    </div>
  </header>

  <div class="lens" id="lens" data-show="false"><span id="lensText"></span></div>

  <div class="container">
    
    <div class="tools">
      <button id="btnRead">üîä Vorlesen</button>
      <button id="btnFocus" aria-pressed="false">üîç Lupe</button>
      <div style="border-left: 2px solid #ddd; padding-left:10px; display:flex; gap:5px;">
        <button id="syllOff" aria-pressed="true">Normal</button>
        <button id="syllColor">üî¥üîµ Farben</button>
      </div>
      <div style="border-left: 2px solid #ddd; padding-left:10px; display:flex; gap:5px;">
        <button id="btnSmaller">A-</button>
        <button id="btnBigger">A+</button>
      </div>
    </div>

    <div id="story-content">
       
<h1>Wenn der Sonntag br√ºllt ‚Äì Formel 1 mit Papa</h1><img src="../bilder/wenn-der-sonntag-bruellt-formel-1-mit-papa.png" onerror="this.onerror=null;this.src='https://rala84.github.io/lesekumpel/bilder/lesekumpel_logo.png';" class="story-image" alt="Bild">

<p>Oh Mann, Sonntagnachmittag ist bei uns oft Formel-1-Zeit. Dann sitzt Papa vor dem Fernseher, seine Augen kleben am Bildschirm, und ich darf eigentlich keine Ger√§usche machen. Aber das ist unm√∂glich, weil die Autos selber so laut sind! Die br√ºllen richtig, wenn die √ºber die Strecke fegen. <strong>WRRRRUMMM!</strong> Das h√∂rt sich an, als w√ºrde ein riesiger Wespenschwarm mit hundert Sachen durch unser Wohnzimmer d√ºsen.</p>

<p>Ich hab ja echt versucht, das spannend zu finden. Die bunten Autos sind cool und die Fahrer sehen aus wie echte Superhelden in ihren Helmen. Manchmal rennen die in der Boxengasse rum, wechseln Reifen in gef√ºhlt zwei Sekunden. Das ist wie ein super-schnelles Tanzballett mit Schraubenschl√ºsseln. Ich w√ºnschte, ich k√∂nnte so schnell meine Schuhe anziehen!</p>

<p>Aber dann... fahren die immer wieder im Kreis. Immer und immer wieder. Manchmal schlafe ich fast ein, wenn Papa nicht gerade aufspringt und "JAAA!" br√ºllt, weil sein Lieblingsfahrer jemanden √ºberholt hat. Ich versuche dann auch so laut zu jubeln, damit er denkt, ich finds auch super. Aber eigentlich denke ich nur: "Kann ich jetzt meine Spielzeugautos nehmen und damit selber Rennen fahren?"</p>

<p>Kennst du das auch? Wenn man mitspielen will, aber es ist dann doch nicht so spannend, wie man dachte? Ich wette, die Fahrer kriegen daf√ºr Gummib√§rchen. Oder zumindest ein dickes Eis. Ich w√ºrde es nur f√ºr Gummib√§rchen machen, ganz ehrlich.</p>

    </div>

    
        <div class="author-profile">
           <img src="https://rala84.github.io/lesekumpel/Jonas-min-compressed.webp" onerror="this.src='https://rala84.github.io/lesekumpel/bilder/lesekumpel_logo.png'" alt="Jonas Abenteurer" class="author-img">
           <div class="author-info">
             <h4>Jonas Abenteurer</h4>
             <p>Jonas ist immer auf Achse! Er erz√§hlt dir die besten Geschichten von seinen wilden Abenteuern drau√üen.</p>
           </div>
        </div>
        

    <div class="quiz-section">
      <h2>üß† Quiz-Zeit! Hast du gut aufgepasst?</h2>
      <div class="quiz-card">
  <h3>1. Was macht der Papa am Sonntagnachmittag oft?</h3>
  <div class="answers-grid">
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Er liest ein dickes Buch.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'correct')">Er schaut Formel 1 im Fernsehen.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Er backt einen Kuchen.</button>
  </div>
</div>

<div class="quiz-card">
  <h3>2. Wie h√∂ren sich die Formel-1-Autos f√ºr das Kind an?</h3>
  <div class="answers-grid">
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Wie eine leise Katze, die schleicht.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Wie ein Vogel, der zwitschert.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'correct')">Wie ein riesiger Wespenschwarm.</button>
  </div>
</div>

<div class="quiz-card">
  <h3>3. Was w√ºrde das Kind dazu bringen, selbst Formel-1-Fahrer zu werden?</h3>
  <div class="answers-grid">
    <button class="quiz-btn" onclick="checkAnswer(this, 'correct')">Wenn es daf√ºr Gummib√§rchen bekommen w√ºrde.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Wenn es einen gl√§nzenden Pokal gewinnen k√∂nnte.</button>
    <button class="quiz-btn" onclick="checkAnswer(this, 'wrong')">Wenn es die schnellsten Schuhe anziehen k√∂nnte.</button>
  </div>
</div>
    </div>

    <div class="interaction-area">
        <div class="microsurvey" id="microsurvey">
            <p>Hat dir die Geschichte gefallen?</p>
            <div id="survey-buttons">
                <button class="thumbs-btn" onclick="handleSurvey('up')">üëç</button>
                <button class="thumbs-btn down" onclick="handleSurvey('down')">üëé</button>
            </div>
            <div id="survey-feedback" style="display:none; color:var(--brand); font-weight:bold;"></div>
        </div>
        <div class="comment-box">
            <div style="font-weight:bold; color:#555; margin-bottom:10px;">üí¨ Dein Kommentar</div>
            <textarea class="fake-textarea" id="commentText" placeholder="Was denkst du √ºber die Geschichte?"></textarea>
            <button class="send-btn" onclick="sendFakeComment()">Senden</button>
            <div style="clear:both;"></div>
        </div>
    </div>

    <div class="footer">
        <p>Erstellt von deinem KI-Lesekumpel ü§ñ</p>
        <div style="margin-top: 10px;">
            <a href="https://rala84.app.n8n.cloud/form/30d75a75-54fd-42fd-bea6-ab24799ca565">‚ú® Neue Geschichte</a>
            <span class="separator">|</span>
            <a href="../index.html">üìö Zur Bibliothek</a>
        </div>
    </div>

  </div>

  <script>
    /* 1. QUIZ LOGIK */
    function checkAnswer(btn, type) { if (type === 'correct') { btn.classList.add('correct'); btn.innerHTML += ' ‚úÖ'; } else { btn.classList.add('wrong'); btn.innerHTML += ' ‚ùå'; } }

    /* 2. BURGER MENU */
    document.getElementById('burgerBtn').onclick = () => document.getElementById('mobileMenu').classList.toggle('open');

    /* 3. MOCK INTERACTION */
    function handleSurvey(type) { document.getElementById('survey-buttons').style.display = 'none'; const fb = document.getElementById('survey-feedback'); fb.style.display = 'block'; fb.innerText = type === 'up' ? "Juhu! Das freut uns! üéâ" : "Danke f√ºr dein Feedback! üí™"; }
    function sendFakeComment() { const inp = document.getElementById('commentText'); if(!inp.value.trim()){ alert("Bitte schreibe erst etwas."); return; } inp.value = ""; alert("Kommentar gesendet! (Prototyp)"); }

    /* 4. SILBEN & TEXT LOGIK */
    function getSyllables(word) { if (word.length < 3) return [word]; let w = word.replace(/(sch|ch|ck|ph|th|qu|st|sp)/gi, '¬ß$&¬ß'); w = w.replace(/([aeiouy√§√∂√º])([^aeiouy√§√∂√º¬ß|])([aeiouy√§√∂√º])/gi, '$1|$2$3'); w = w.replace(/([aeiouy√§√∂√º])([^aeiouy√§√∂√º¬ß|])([aeiouy√§√∂√º¬ß|])([aeiouy√§√∂√º])/gi, '$1$2|$3$4'); return w.replace(/¬ß/g, '').split('|'); }
    function processNode(node) { if (node.nodeType === 3) { const text = node.nodeValue; if (!text.trim()) return; const wrapper = document.createElement('span'); text.split(/([ \t\n\r,.!?;:()"]+)/).forEach(p => { if (/[a-zA-Z√§√∂√º√Ñ√ñ√ú√ü]/.test(p)) { const ws = document.createElement('span'); ws.className = 'word'; getSyllables(p).forEach(s => { const ss = document.createElement('span'); ss.className = 'syll'; ss.innerText = s; ws.appendChild(ss); }); wrapper.appendChild(ws); } else wrapper.appendChild(document.createTextNode(p)); }); node.parentNode.replaceChild(wrapper, node); } else if (node.nodeType === 1) { if (['SCRIPT','STYLE','BUTTON','IMG','HEADER','TEXTAREA'].includes(node.tagName)) return; if (['tools','footer','interaction-area','quiz-section','mobile-menu','author-profile'].some(c => node.classList.contains(c))) return; Array.from(node.childNodes).forEach(processNode); } }

    document.addEventListener("DOMContentLoaded", () => {
      const contentRoot = document.getElementById('story-content');
      processNode(contentRoot);

      const root = document.documentElement;
      const setSyllMode = (m) => { root.setAttribute('data-syllmode', m); document.getElementById('syllOff').setAttribute('aria-pressed', m==='off'); document.getElementById('syllColor').setAttribute('aria-pressed', m==='color'); };
      document.getElementById('syllOff').onclick = () => setSyllMode('off');
      document.getElementById('syllColor').onclick = () => setSyllMode('color');
      let cSize = 1.4;
      document.getElementById('btnBigger').onclick = () => { if(cSize<3) contentRoot.style.fontSize=(cSize+=0.2)+"em"; };
      document.getElementById('btnSmaller').onclick = () => { if(cSize>0.8) contentRoot.style.fontSize=(cSize-=0.2)+"em"; };

      const btnFocus=document.getElementById('btnFocus'), lens=document.getElementById('lens'); let lAct=false;
      btnFocus.onclick=()=>{lAct=!lAct; btnFocus.setAttribute('aria-pressed',lAct); if(!lAct)lens.dataset.show="false";};
      document.addEventListener('mousemove',e=>{ if(!lAct)return; const t=e.target.closest('.word'); if(t){ lens.dataset.show="true"; document.getElementById('lensText').innerText=t.innerText; lens.style.left=e.clientX+'px'; lens.style.top=e.clientY+'px'; } else lens.dataset.show="false"; });

      const btnRead=document.getElementById('btnRead'); let isSp=false;
      btnRead.onclick=()=>{ if(isSp){ window.speechSynthesis.cancel(); isSp=false; btnRead.innerText="üîä Vorlesen"; } else { const txt=document.getElementById('story-content').innerText; const u=new SpeechSynthesisUtterance(txt); u.lang='de-DE'; u.rate=0.9; u.onend=()=>{isSp=false; btnRead.innerText="üîä Vorlesen";}; window.speechSynthesis.speak(u); isSp=true; btnRead.innerText="‚èπ Stopp"; } };
    });
  </script>
</body>
</html>